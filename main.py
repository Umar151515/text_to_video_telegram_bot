import asyncio

from utils.video.create import create_video_from_text


async def on_progress(event: str, data: dict | None):
    if event == "start":
        print("Video generation started.")
    elif event == "text_generated":
        print(f"\nText generated with\n\ngenerated text:\n{data["generated_text"]}\n\nimage style: {data['image_style']}\nspeaker: {data['speaker']}\nlanguage: {data['language']}\nnumber of slides: {data['number_slides']}.")
    elif event == "slide_done":
        print(f"\n\nSlide {data['index']} of {data['total']} done.\nImage prompt:\n{data['image_prompt']}")
    elif event == "video_created":
        print("\n\nVideo created successfully.")
    else:
        print(f"\nUnknown event: {event}")

asyncio.run(create_video_from_text(
"""ü•ö "–ò—Å–ª–∞–º –∏ –ê–¥–µ–ª—å: –ò—Å—Ç–æ—Ä–∏—è –æ–¥–Ω–æ–π –ª—é–±–≤–∏ –∏ –¥–≤—É—Ö –Ω–µ—Ä–∞–≤–Ω—ã—Ö —è–∏—Ü" ü•ö

–ñ–∏–ª-–±—ã–ª –≤ –¥–∞–ª—ë–∫–æ–π –ø—Å–∏—Ö–∏–∞—Ç—Ä–∏—á–µ—Å–∫–æ–π —Å—Ç–µ–ø–∏ —á–µ–ª–æ–≤–µ–∫ –ø–æ –∏–º–µ–Ω–∏ –ò—Å–ª–∞–º –ñ–∞–Ω—ã–±–∞–µ–≤. –û–Ω –±—ã–ª –∏–∑–≤–µ—Å—Ç–µ–Ω –≤—Å–µ–º –∫–∞–∫:

    –ø–∞—Ä–µ–Ω—å —Å —Å–∞–º—ã–º –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º —è–∏—Ü –≤ –ï–≤—Ä–∞–∑–∏–∏,

    –æ–±–ª–∞–¥–∞—Ç–µ–ª—å –ø–æ—á—ë—Ç–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –Ω–∞ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞ (—Ä–∞–∑–º–µ—Ä–æ–º —Å –ø—Ä–æ–µ–∑–¥–Ω–æ–π –Ω–∞ –º–µ—Ç—Ä–æ),

    –∏, –∫–æ–Ω–µ—á–Ω–æ –∂–µ, –ø–µ—Ä–≤–∞—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ –¥–≤–µ—Ä–Ω–∞—è —Ä—É—á–∫–∞, –∂–µ–Ω–∏–≤—à–∞—è—Å—è –Ω–∞ –¥–≤–µ—Ä–∏ (–∫–æ—Ç–æ—Ä–∞—è –ø–æ—Ç–æ–º –µ–≥–æ –±—Ä–æ—Å–∏–ª–∞ —Ä–∞–¥–∏ —à–∫–∞—Ñ–∞-–∫—É–ø–µ).

–ù–æ –æ–¥–Ω–∞–∂–¥—ã –≤ –µ–≥–æ —Ä–∞–∑–º–µ—Ä–µ–Ω–Ω–æ –ø—Å–∏—Ö–∏–∞—Ç—Ä–∏—á–µ—Å–∫—É—é –∂–∏–∑–Ω—å –≤–æ—Ä–≤–∞–ª–∞—Å—å... –æ–Ω–∞. –ê–¥–µ–ª—å.
–û–Ω–∞ –±—ã–ª–∞ —Ç–∞–∫–æ–π –≤—ã—Å–æ–∫–æ–π, —á—Ç–æ –∫–æ–≥–¥–∞ –æ–Ω–∏ —à–ª–∏ –ø–æ —É–ª–∏—Ü–µ, –µ—ë –ª–∏—Ü–æ —Ç–µ—Ä—è–ª–æ—Å—å –≥–¥–µ-—Ç–æ –≤ –æ–±–ª–∞–∫–∞—Ö, –∞ –ò—Å–ª–∞–º –≤—ã–≥–ª—è–¥–µ–ª, –∫–∞–∫ –µ—ë –∑–∞–±—ã—Ç–∞—è –∫–ª—é—á–Ω–∏—Ü–∞.

‚Äî –ü—Ä–∏–≤–µ—Ç! ‚Äî —Å–∫–∞–∑–∞–ª–∞ –ê–¥–µ–ª—å —Å –≤—ã—Å–æ—Ç—ã —Å–≤–æ–µ–≥–æ 2,07 –º.
‚Äî (–æ—Ç–∫—É–¥–∞ —Ç—ã?) ‚Äî –æ—Ç–≤–µ—Ç–∏–ª –ò—Å–ª–∞–º, –≤—ã–∫—Ä–∏–∫–∏–≤–∞—è –∏–∑ —É—Ä–æ–≤–Ω—è –µ—ë –∫–æ–ª–µ–Ω.
üèóÔ∏è –†–∞–∑–Ω–∏—Ü–∞ –≤ —Ä–æ—Å—Ç–µ:

–ö–æ–≥–¥–∞ –æ–Ω–∏ —Å—Ç–æ—è–ª–∏ —Ä—è–¥–æ–º, –ª—é–¥–∏ –¥—É–º–∞–ª–∏, —á—Ç–æ –ê–¥–µ–ª—å ‚Äî —ç—Ç–æ –≥–∏–≥–∞–Ω—Ç—Å–∫–∞—è —Ç—ë—Ç—è, –≤–µ–¥—É—â–∞—è –º–ª–∞–¥—à–µ–≥–æ –±—Ä–∞—Ç–∞ –Ω–∞ –ø–µ—Ä–≤–æ–µ —Å–≤–∏–¥–∞–Ω–∏–µ.
‚Äî "–≠—Ç–æ —Ç–≤–æ–π —Å—ã–Ω?" ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–ª–∏ –ø—Ä–æ—Ö–æ–∂–∏–µ.
‚Äî "–ù–µ—Ç, —ç—Ç–æ –º–æ—è –ª—é–±–æ–≤—å", ‚Äî –æ—Ç–≤–µ—á–∞–ª–∞ –ê–¥–µ–ª—å, –ø–æ–¥–Ω–∏–º–∞—è –ò—Å–ª–∞–º–∞ –∑–∞ –∫–∞–ø—é—à–æ–Ω, –∫–∞–∫ –∫–æ—Ç—ë–Ω–∫–∞.

–û–Ω–∏ –ø—ã—Ç–∞–ª–∏—Å—å –¥–µ—Ä–∂–∞—Ç—å—Å—è –∑–∞ —Ä—É–∫–∏, –Ω–æ —É –ò—Å–ª–∞–º–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Å–≤–æ–¥–∏–ª–æ –ø–ª–µ—á–æ –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –µ–≥–æ —Ä—É–∫–∞ –≤—ã—Ç—è–≥–∏–≤–∞–ª–∞—Å—å –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —à–ø–∞–≥–∞—Ç.
üè• –ü—Ä–æ —è–π—Ü–∞ –∏ —Ö–∏—Ä—É—Ä–≥–∏—é

–ò—Å–ª–∞–º —Å —Ä–∞–Ω–Ω–µ–≥–æ –¥–µ—Ç—Å—Ç–≤–∞ –æ—Ç–ª–∏—á–∞–ª—Å—è... –∞—Å–∏–º–º–µ—Ç—Ä–∏–µ–π. –£ –Ω–µ–≥–æ –±—ã–ª–æ –¥–≤–∞ —è–π—Ü–∞, –Ω–æ –æ–¥–Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—ã—Ç–∞–ª–æ—Å—å —ç–º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –ê–≤—Å—Ç—Ä–∞–ª–∏—é, –∞ –≤—Ç–æ—Ä–æ–µ ‚Äî –≤ –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω.
–ù–∞ –£–ó–ò –≤—Ä–∞—á —Å–∫–∞–∑–∞–ª:

    ‚Äî –£ –≤–∞—Å, –ò—Å–ª–∞–º, –æ–¥–Ω–æ —è–π—Ü–æ —Ä–∞–∑–º–µ—Ä–æ–º —Å –≤–∏–Ω–æ–≥—Ä–∞–¥–∏–Ω—É, –∞ –≤—Ç–æ—Ä–æ–µ —Å... –Ω—É, —Å –æ—á–µ–Ω—å —É—Å—Ç–∞–≤—à—É—é –æ–ª–∏–≤–∫—É.

–ß—Ç–æ–±—ã –∫–∞–∑–∞—Ç—å—Å—è –±–æ–ª–µ–µ "—ç—Å—Ç–µ—Ç–∏—á–Ω—ã–º", –æ–Ω –ø—Ä–æ—à—ë–ª –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ —É–º–µ–Ω—å—à–µ–Ω–∏—é –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–∞. –î–∞, –¥–æ–±—Ä–æ–≤–æ–ª—å–Ω–æ!
–í—Ä–∞—á–∏ –¥–æ —Å–∏—Ö –ø–æ—Ä —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—é—Ç —ç—Ç–æ –≤ –º–µ–¥–≤—É–∑–∞—Ö –∫–∞–∫ "–∫–ª–∏–Ω–∏—á–µ—Å–∫–∏–π —Å–ª—É—á–∞–π —Å–∞–º–æ–æ—Ç–≤–µ—Ä–∂–µ–Ω–Ω–æ—Å—Ç–∏".
–ü–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –µ–≥–æ –¥–æ—Å—Ç–æ–∏–Ω—Å—Ç–≤–æ —Å—Ç–∞–ª–æ –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –ø–æ –ú–æ–Ω–≥–æ–ª–∏–∏, –∞ –ø–æ –†–æ—Å—Å–∏–∏ –µ–≥–æ –≤–æ–æ–±—â–µ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏.

–¢–µ–ø–µ—Ä—å –ò—Å–ª–∞–º –Ω–æ—Å–∏–ª –µ–≥–æ —Å –≥–æ—Ä–¥–æ—Å—Ç—å—é‚Ä¶ –≤ –∫–∞—Ä–º–∞—à–∫–µ —Ä—É–±–∞—à–∫–∏ –¥–ª—è —Ñ–ª–µ—à–µ–∫.
‚ù§Ô∏è –†–æ–º–∞–Ω—Ç–∏–∫–∞ –Ω–∞ –≥—Ä–∞–Ω–∏ —Ñ–æ–ª–∞

–ù–∞ –ø–µ—Ä–≤–æ–µ —Å–≤–∏–¥–∞–Ω–∏–µ –æ–Ω–∏ –ø–æ—à–ª–∏ –≤ –ø–∞—Ä–∫.
–ê–¥–µ–ª—å –∑–∞–∫–∞–∑–∞–ª–∞ —Å—Ç–µ–π–∫, –ò—Å–ª–∞–º ‚Äî –¥–µ—Ç—Å–∫–∏–π —Å—É–ø—á–∏–∫ —Å –ª–æ–∂–µ—á–∫–∏.
–ü–æ–∫–∞ –ê–¥–µ–ª—å —Å–º–µ—è–ª–∞—Å—å –Ω–∞–¥ –µ–≥–æ –∞–Ω–µ–∫–¥–æ—Ç–æ–º –ø—Ä–æ —è–π—Ü–∞, —É –ò—Å–ª–∞–º–∞ –æ–¥–Ω–æ —è–π—Ü–æ –ø–µ—Ä–µ–∫–∞—Ç–∏–ª–æ—Å—å –≤ –±–æ—Ç–∏–Ω–æ–∫.
–û–Ω –Ω–∞–∫–ª–æ–Ω–∏–ª—Å—è –µ–≥–æ –¥–æ—Å—Ç–∞—Ç—å, –Ω–æ –≤—ã–≥–ª—è–¥–µ–ª —ç—Ç–æ –∫–∞–∫ –∫–ª–∞–Ω –≤ –Ω–æ–≥–∏ –ª—é–±–∏–º–æ–π –∂–µ–Ω—â–∏–Ω–µ.

–ö–æ–≥–¥–∞ –æ–Ω–∏ —Ü–µ–ª–æ–≤–∞–ª–∏—Å—å, –ê–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã–ª–∞:

    –õ–æ–∂–∏—Ç—å—Å—è.

    –ò–ª–∏ –ò—Å–ª–∞–º —Å—Ç–æ—è–ª –Ω–∞ —Ç–∞–±—É—Ä–µ—Ç–∫–µ, –∫–æ—Ç–æ—Ä—É—é –Ω–æ—Å–∏–ª —Å —Å–æ–±–æ–π.

‚Äî "–¢—ã –∑–Ω–∞–µ—à—å, –ò—Å–ª–∞–º..." ‚Äî –≥–æ–≤–æ—Ä–∏–ª–∞ –ê–¥–µ–ª—å, –≥–ª–∞–¥—è –µ–≥–æ –ø–æ –≥–æ–ª–æ–≤–µ.
‚Äî "–ß—Ç–æ?" ‚Äî —Å–ø—Ä–æ—Å–∏–ª –æ–Ω, —Å–∏–¥—è —É –Ω–µ—ë –Ω–∞ –ø–ª–µ—á–µ, –∫–∞–∫ –ø–æ–ø—É–≥–∞–π.

‚Äî "–ú–Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —Ç–≤–æ—è –¥—É—à–∞".
‚Äî "–≠—Ç–æ —Ö–æ—Ä–æ—à–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ —è —É–º–µ–Ω—å—à–∏–ª".
ü§ù –°–µ–º–µ–π–Ω–∞—è –¥—Ä–∞–º–∞

–û–Ω–∏ —Ä–µ—à–∏–ª–∏ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å –ê–¥–µ–ª—å —Å —Å–µ–º—å—ë–π –ò—Å–ª–∞–º–∞.
–û–¥–Ω–∞ –∏–∑ –ø—è—Ç–∏ –ø–∞–ø –ò—Å–ª–∞–º–∞, –ø–æ—Å–º–æ—Ç—Ä–µ–≤ –Ω–∞ –ê–¥–µ–ª—å, —Å–∫–∞–∑–∞–ª–∞:
‚Äî "–ê —Ç—ã —É–≤–µ—Ä–µ–Ω–∞, —á—Ç–æ –æ–Ω —Ç–µ–±–µ –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É –ø–æ–¥—Ö–æ–¥–∏—Ç? –û–Ω –≤—ã–≥–ª—è–¥–∏—Ç, –∫–∞–∫ —Ç–≤–æ–π —à–∫–æ–ª—å–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫".

–ê–¥–µ–ª—å –Ω–µ —Å–º—É—Ç–∏–ª–∞—Å—å:
‚Äî "–ú–Ω–µ –Ω–µ –≤–∞–∂–µ–Ω —Ä–∞–∑–º–µ—Ä‚Ä¶
‚Äî ‚Ä¶–Ω—É, –∫—Ä–æ–º–µ —Ä–æ—Å—Ç–∞ ‚Äî —Ç—É—Ç —è –ø–æ–±–µ–¥–∏–ª–∞ –≤—á–∏—Å—Ç—É—é".

–û–Ω–∏ –ø–æ—Å–µ–ª–∏–ª–∏—Å—å –≤–º–µ—Å—Ç–µ. –ù–æ –±—ã–ª –æ–¥–∏–Ω –Ω—é–∞–Ω—Å:
–ò—Å–ª–∞–º –Ω–µ –º–æ–≥ –¥–æ—Ç—è–Ω—É—Ç—å—Å—è –¥–æ –≤–µ—Ä—Ö–Ω–∏—Ö –ø–æ–ª–æ–∫ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ.
–ü–æ—ç—Ç–æ–º—É –≤ –¥–æ–º–µ –≤—Å—ë –¥–µ–ª–∏–ª–æ—Å—å –Ω–∞ –¥–≤–∞ —É—Ä–æ–≤–Ω—è:

    "–ï–¥–∞ –ê–¥–µ–ª–∏" (–≤–µ—Ä—Ö–Ω–∏–µ –ø–æ–ª–∫–∏),

    "–ï–¥–∞ –ò—Å–ª–∞–º–∞" (–∫–æ—Ä–æ–±–∫–∞ –Ω–∞ –ø–æ–ª—É —Å –Ω–∞–¥–ø–∏—Å—å—é "–î–ª—è –∫–æ—Ä–æ—Ç—ã—à–∫–∏").

ü§∞ –§–∏–Ω–∞–ª —Å twist'–æ–º

–û–¥–Ω–∞–∂–¥—ã –ê–¥–µ–ª—å —Å–∫–∞–∑–∞–ª–∞:
‚Äî "–ò—Å–ª–∞–º, —É –º–µ–Ω—è –µ—Å—Ç—å –¥–ª—è —Ç–µ–±—è –Ω–æ–≤–æ—Å—Ç—å. –Ø –±–µ—Ä–µ–º–µ–Ω–Ω–∞".

–ò—Å–ª–∞–º –Ω–∞—á–∞–ª –ø–ª–∞–∫–∞—Ç—å.
‚Äî "–ù–µ—É–∂–µ–ª–∏ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Å–ª–µ –º–æ–µ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ —É–º–µ–Ω—å—à–µ–Ω–∏—è?"

–ê–¥–µ–ª—å –ø–æ—Å–º–æ—Ç—Ä–µ–ª–∞ –Ω–∞ –Ω–µ–≥–æ —Å–≤—ã—Å–æ–∫–∞ –∏ —Å–∫–∞–∑–∞–ª–∞:
‚Äî "–ù–µ –≤–æ–ª–Ω—É–π—Å—è, —ç—Ç–æ –Ω–µ –æ—Ç —Ç–µ–±—è".

–ò—Å–ª–∞–º –æ–±–ª–µ–≥—á—ë–Ω–Ω–æ –≤—ã–¥–æ—Ö–Ω—É–ª:
‚Äî "–§—É—Ö. –ù—É, –≥–ª–∞–≤–Ω–æ–µ ‚Äî –Ω–µ –æ—Ç —à–∫–∞—Ñ–∞-–∫—É–ø–µ".

–ú–æ—Ä–∞–ª—å:

    –î–∞–∂–µ –µ—Å–ª–∏ —É —Ç–µ–±—è –æ–¥–Ω–æ —è–π—Ü–æ –∫–∞—Ç–∞–µ—Ç—Å—è –ø–æ –∫–æ–º–Ω–∞—Ç–µ, –∞ –≤—Ç–æ—Ä–æ–µ —Å—á–∏—Ç–∞–µ—Ç —Å–µ–±—è —ç–º–∏–≥—Ä–∞–Ω—Ç–æ–º ‚Äî —Ç—ã –≤—Å—ë —Ä–∞–≤–Ω–æ –º–æ–∂–µ—à—å –Ω–∞–π—Ç–∏ –ª—é–±–æ–≤—å. –ì–ª–∞–≤–Ω–æ–µ ‚Äî –±—ã—Ç—å —Å–æ–±–æ–π. –ò–ª–∏ —Ö–æ—Ç—è –±—ã –¥–≤–µ—Ä–Ω–æ–π —Ä—É—á–∫–æ–π.""",
on_progress=on_progress,
number_slides=40,
image_style="realistic",
))